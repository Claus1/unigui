"use strict";(globalThis["webpackChunkuniqua"]=globalThis["webpackChunkuniqua"]||[]).push([[9],{6009:(e,t,a)=>{a.r(t),a.d(t,{default:()=>la});var s=a(3673),l=a(2323);const i=(0,s._)("div",{class:"q-pa-md"},null,-1),n=(0,s._)("div",{class:"q-pa-md"},null,-1);function o(e,t,a,o,d,r){const c=(0,s.up)("q-item-label"),h=(0,s.up)("element"),u=(0,s.up)("q-tab"),p=(0,s.up)("q-tabs"),g=(0,s.up)("q-space"),m=(0,s.up)("q-tooltip"),f=(0,s.up)("q-btn"),y=(0,s.up)("q-toolbar"),w=(0,s.up)("q-header"),b=(0,s.up)("zone"),k=(0,s.up)("q-page"),v=(0,s.up)("q-page-container"),x=(0,s.up)("q-layout");return(0,s.wg)(),(0,s.j4)(x,{view:"lHh Lpr lFf"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{elevated:"",class:(0,l.C_)({"bg-deep-purple-9":e.Dark.isActive})},{default:(0,s.w5)((()=>[(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,{class:"text-h5"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.screen.header?e.screen.header:""),1)])),_:1}),i,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.screen.toolbar,(t=>((0,s.wg)(),(0,s.j4)(h,{class:(0,l.C_)(["q-ma-xs",{"bg-blue-grey-7":e.Dark.isActive,"bg-blue-5":!e.Dark.isActive}]),data:t,pdata:e.tooldata},null,8,["class","data","pdata"])))),256)),n,(0,s.Wm)(p,{class:"bold-tabs",align:"center","inline-label":"",dense:"",modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tab=t),style:{float:"center"}},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.menu,(t=>((0,s.wg)(),(0,s.iD)("div",null,[t.icon?((0,s.wg)(),(0,s.j4)(u,{key:0,class:"justify-center text-white shadow-2","no-caps":"",name:t.name,icon:t.icon,label:t.name,onClick:a=>e.tabclick(t.name)},null,8,["name","icon","label","onClick"])):(0,s.kq)("",!0),t.icon?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(u,{key:1,class:"justify-center text-white shadow-2","no-caps":"",name:t.name,label:t.name,onClick:a=>e.tabclick(t.name)},null,8,["name","label","onClick"]))])))),256))])),_:1},8,["modelValue"]),(0,s.Wm)(g),(0,s.Wm)(f,{"no-caps":"",dense:"",round:"",icon:e.Dark.isActive?"light_mode":"dark_mode",onClick:t[1]||(t[1]=t=>e.Dark.set(!e.Dark.isActive))},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{class:"text-body2"},{default:(0,s.w5)((()=>[(0,s.Uk)("Dark/Light mode")])),_:1})])),_:1},8,["icon"])])),_:1})])),_:1},8,["class"]),(0,s.Wm)(v,{class:"content"},{default:(0,s.w5)((()=>[(0,s.Wm)(k,{class:"flex justify-center centers"},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{data:e.screen.blocks,ref:"page"},null,8,["data"])])),_:1})])),_:1})])),_:1})}function d(e,t,a,i,n,o){const d=(0,s.up)("q-icon"),r=(0,s.up)("q-item-section"),c=(0,s.up)("q-item-label"),h=(0,s.up)("q-item");return(0,s.wg)(),(0,s.j4)(h,{clickable:"",tag:"a",target:"_blank",onClick:e.send},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{name:e.icon},null,8,["name"])])),_:1}),(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.name),1)])),_:1})])),_:1})])),_:1},8,["onClick"])}a(71);var r=a(698),c=a(8603);let h=null,u={};var p;let g=!0;const m=136,f=400,y=`height: ${m}px; width: ${f}px`;function w(e){let t=e.minheight?e.minheight:m,a=e.minwidth?e.minwidth:f;return`height: ${t}px; width: ${a}px`}const b=window.location.host,k=`${window.location.protocol}//${b}`;console.log(k);const v=!1;let C={},_={},q={};function A(e){p=new WebSocket(v?"ws://localhost:8000/ws":`ws://${b}/ws`),p.onopen=()=>e.statusConnect=!0,p.onmessage=t=>{g&&console.log("incoming message",t.data),e.processMessage(JSON.parse(t.data))},p.onerror=t=>e.error(t),p.onclose=t=>{t.wasClean?e.info("Connection was finished by the server."):e.error("Connection suddenly closed!"),e.statusConnect=!1,g&&console.info("close code : "+t.code+" reason: "+t.reason)},h=e}function D(e){console.log("sended",e),p.send(JSON.stringify(e))}let S,j=0,z=!0;function Z(e){z=e,e||(q={})}function $(e){if(z){let t=e.pdata?`${e.data.name}@${e.pdata.name}`:`_scroll@${e.data.name}`,a=q[t];if(a)return a.styleSize;z=!1}return w(e.data)}function M(e,t,a,s="complete"){let l=++j,i=[e.pdata.name,e.data.name,s,t,l];D(i),u[l]=a}function V(){C={},q=_,z=!0,_={}}function E(e,t){Object.assign(e.data,t),e.updated=t.value,e.value=t.value}function W(e){for(let t of e){let e=t.path;if(e.length>1){e.reverse();let a=e.join("@"),s=_[a];E(s,t.data)}else{let a=C[e[0]];Object.assign(a.data,t.data)}}}function K(e){"string"==typeof e.value?h.error(e.value):u[e.id](e.value),delete u[e.id]}function Q(e){let t=[];for(let s of e)s instanceof Array?t.push(s):t.push([s]);let a=t.shift();return t.reduce(((e,t)=>e.flatMap((e=>t.map((t=>e instanceof Array?[...e,t]:[e,t]))))),a)}function O(){for(let[e,t]of Object.entries(_))t.expanding&&(t.styleSize=w(t.data));(0,s.Y3)((()=>{requestAnimationFrame((()=>{requestAnimationFrame((()=>{U()}))}))}))}let H=(0,c.debounce)(O,200);function U(e){Array.isArray(e)&&(e=null),S&&(S.disconnect(),S=null),g&&console.log("------------------recalc design");const t=N(e),a=F(e);for(let[s,l]of Object.entries(t)){let e=_[s];const[t,i]=a[s];let n,o=e.geom().el,d=e.pdata?e.pdata.name:e.name,r=C[d];for(let a of r.data.value.slice(1))if(Array.isArray(a)){if(a.find((t=>t.name==e.data.name))){let e=a[a.length-1],t=`${e.name}@${d}`;n=_[t];break}}else if(a.name==e.data.name){n=e;break}let c=r.data.width?r.data.width-o.clientWidth-t:r.$el.getBoundingClientRect().right-(n?n.geom().right:e.geom().right);c/=i;let h=s.startsWith("_scroll@")?e.geom().inner.clientHeight:o.clientHeight;e.styleSize=`height: ${h+l}px; width: ${o.clientWidth+c+t}px;`}}function N(e){const t=h.screen.blocks;let a=window.innerHeight;a+=14;let s={},l=new Map,i={};for(let[d,r]of Object.entries(C))i[r.name]=r.$el.getBoundingClientRect().height;let n=[];for(let d of t){const e=[];let t=d instanceof Array,o=t?Q(d):[[d]];for(let a of o){let e=0;for(let t of a)e+=i[t.name]+12;n.push([e,a])}n.sort(((e,t)=>e[0]>t[0]?-1:e[0]==t[0]?0:1));for(let s of n){let t=s[1];(0,r.hu)(Array.isArray(t));const i=[];for(let[e,a]of Object.entries(_))if(a.expanding_height){let[s,n]=e.split("@");if(t.find((e=>e.name==n))){let e=!0;const t=a.geom();for(let[s,n]of i.entries()){let o=n.geom();if(n!==a&&o.top==t.top){o.scrollHeight<t.scrollHeight&&(i[s]=a),e=!1,l.set(a.fullname,n.fullname);break}}e&&i.push(a)}}i.length&&e.push([a-s[0]-64,i])}for(let[a,l]of e){l.sort(((e,t)=>e.geom().scrollHeight<t.geom().scrollHeight));let e=l.length;for(let i of l)i.fullname in s&&(e--,a-=s[i.fullname]);let t=0;for(let i of l)if(!(i.fullname in s)){let l,n=a/e;if(1==e)l=n;else if(l=Math.floor(n),n-l){t+=n-l;let e=Math.round(t)-t;e<.001&&e>-.001&&(l+=Math.round(t),t=0)}"docviewer"==i.type?s[i.fullname]=l+4:s[i.fullname]=l}}}let o=Array.from(l.entries());o.sort(((e,t)=>e[0]in s||e[1]in s?-1:1));for(let[d,r]of o)r in s?s[d]=s[r]:s[r]=s[d];return s}function F(e){e=null;const t=e?[e]:h.screen.blocks;let a=window.innerWidth-15,s=[],l={};for(let o of t)if(0==s.length)if(Array.isArray(o))for(let e of o)s.push(Array.isArray(e)?e:[e]);else s=[[o]];else{let e=[];if(Array.isArray(o))for(let t of o)for(let a of s)e.push(Array.isArray(t)?a.concat(t):[...a,t]);else for(let t of s)e.push([...t,o]);s=e}s.sort(((e,t)=>e.length>t.length?-1:e.length==t.length?0:1));const i=[];let n=new Map;for(let o of s){let e=Array.isArray(o)?o[o.length-1]:o,t=C[e.name].$el.getBoundingClientRect().right;e=Array.isArray(o)?o[0]:o;let s=C[e.name].$el.getBoundingClientRect().left,l=a-t+s-10;const d=[];for(let[a,i]of Object.entries(_))if(i.expanding_width){let e=a.split("@")[1];if(o.find((t=>t.name==e))){let e=!0,t=i.geom().left;for(let[a,s]of d.entries())if(s!==i&&s.geom().left==t){s.geom().scrollWidth<i.geom().scrollWidth?(d[a]=i,n.set(s.fullname,i.fullname)):n.set(i.fullname,s.fullname),e=!1;break}e&&d.push(i)}}d.length&&i.push([l,d])}for(let[o,d]of i){d.sort(((e,t)=>e.geom().scrollWidth-t.geom().scrollWidth));let e=d.length,t={};for(let a=0;a<d.length;a++){let s=d[a],i=s.parent_name,n=i||s.name;if(t[n]?t[n]++:t[n]=1,n=s.parent_name,n){let e=C[n];if(e.data.width){let t=a+1,i=d[t];if(i&&i.parent_name!=n){let t=s.geom().right-s.geom().left,a=e.data.width-t;l[s.fullname]=[a,1]}}}let r=l[s.fullname];r&&(e--,o-=r[0]/r[1])}for(let a of d){let s=l[a.fullname];if(void 0===s){let s=a.pdata?a.pdata.name:a.name;l[a.fullname]=[Math.floor(o/e),t[s]]}}}for(let[o,d]of n.entries())d in l?l[o]=l[d]:l[d]=l[o];return l}const T=(0,s.aZ)({name:"menubar",methods:{send(){D(["root",this.name])}},props:{name:{type:String,required:!0},icon:{type:String,default:""}}});var P=a(4260),R=a(3414),I=a(2035),L=a(4554),B=a(2350),Y=a(7518),X=a.n(Y);const G=(0,P.Z)(T,[["render",d]]),J=G;X()(T,"components",{QItem:R.Z,QItemSection:I.Z,QIcon:L.Z,QItemLabel:B.Z});const ee={key:0,class:"row q-col-gutter-xs q-py-xs"},te={class:"q-col-gutter-xs"},ae={key:0,class:"column q-col-gutter-xs"};function se(e,t,a,l,i,n){const o=(0,s.up)("zone",!0),d=(0,s.up)("block");return e.data instanceof Array?((0,s.wg)(),(0,s.iD)("div",ee,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.data,(e=>((0,s.wg)(),(0,s.iD)("div",te,[e instanceof Array?((0,s.wg)(),(0,s.iD)("div",ae,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e,(e=>((0,s.wg)(),(0,s.j4)(o,{class:"q-col-gutter-xs q-py-xs",data:e},null,8,["data"])))),256))])):((0,s.wg)(),(0,s.j4)(d,{key:1,data:e},null,8,["data"]))])))),256))])):((0,s.wg)(),(0,s.j4)(d,{key:1,data:e.data},null,8,["data"]))}const le={class:"row"},ie=["data","pdata"],ne={key:0,class:"row"},oe=["data","pdata"],de={key:0,class:"row"};function re(e,t,a,i,n,o){const d=(0,s.up)("element"),r=(0,s.up)("q-icon"),c=(0,s.up)("q-scroll-area"),h=(0,s.up)("q-card");return(0,s.wg)(),(0,s.j4)(h,{class:"my-card q-ma-xs"},{default:(0,s.w5)((()=>[(0,s._)("div",le,[e.data.logo?((0,s.wg)(),(0,s.j4)(d,{key:0,class:"q-ma-sm",data:e.data.logo,pdata:e.data},null,8,["data","pdata"])):e.data.icon?((0,s.wg)(),(0,s.j4)(r,{key:1,class:"q-mt-sm",size:"sm",name:e.data.icon},null,8,["name"])):(0,s.kq)("",!0),"_"!=e.name[0]?((0,s.wg)(),(0,s.iD)("p",{key:2,class:(0,l.C_)(["q-ma-sm",{"text-info":e.Dark.isActive,"text-cyan-10":!e.Dark.isActive}]),style:{"font-size":"18px"}},(0,l.zw)(e.name),3)):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.tops,(t=>((0,s.wg)(),(0,s.j4)(d,{class:"q-ma-xs",data:t,pdata:e.data},null,8,["data","pdata"])))),256))]),e.data.scroll?((0,s.wg)(),(0,s.j4)(c,{key:0,style:(0,l.j5)(e.styleSize),"thumb-style":e.thumbStyle,"bar-style":e.barStyle},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.data.value.slice(1),(t=>((0,s.wg)(),(0,s.iD)("div",{class:"column",data:t,pdata:e.data},[t instanceof Array?((0,s.wg)(),(0,s.iD)("div",ne,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t,(t=>((0,s.wg)(),(0,s.j4)(d,{class:"q-ma-xs",data:t,pdata:e.data},null,8,["data","pdata"])))),256))])):((0,s.wg)(),(0,s.j4)(d,{key:1,class:"q-ma-xs",data:t,pdata:e.data},null,8,["data","pdata"]))],8,ie)))),256))])),_:1},8,["style","thumb-style","bar-style"])):((0,s.wg)(!0),(0,s.iD)(s.HY,{key:1},(0,s.Ko)(e.data.value.slice(1),(t=>((0,s.wg)(),(0,s.iD)("div",{class:"column",data:t,pdata:e.data},[t instanceof Array?((0,s.wg)(),(0,s.iD)("div",de,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t,(t=>((0,s.wg)(),(0,s.j4)(d,{class:"q-ma-xs",data:t,pdata:e.data},null,8,["data","pdata"])))),256))])):((0,s.wg)(),(0,s.j4)(d,{key:1,class:"q-ma-xs",data:t,pdata:e.data},null,8,["data","pdata"]))],8,oe)))),256))])),_:1})}var ce=a(8880);const he=e=>((0,s.dD)("data-v-591efd84"),e=e(),(0,s.Cn)(),e),ue={key:4,class:"{'bg-blue-grey-9': Dark.isActive}"},pe=["width","height"],ge=["src"],me={key:17,class:"web-camera-container"},fe={class:"camera-button"},ye={key:0},we={key:1},be={class:"camera-loading"},ke=he((()=>(0,s._)("ul",{class:"loader-circle"},[(0,s._)("li"),(0,s._)("li"),(0,s._)("li")],-1))),ve=[ke],xe=["height"],Ce=["height"],_e={key:1,class:"camera-shoot"},qe=he((()=>(0,s._)("img",{src:"https://img.icons8.com/material-outlined/50/000000/camera--v2.png"},null,-1))),Ae=[qe],De={key:2,class:"camera-download"};function Se(e,t,a,i,n,o){const d=(0,s.up)("q-icon"),r=(0,s.up)("q-img"),c=(0,s.up)("q-badge"),h=(0,s.up)("q-select"),u=(0,s.up)("q-checkbox"),p=(0,s.up)("q-toggle"),g=(0,s.up)("q-btn"),m=(0,s.up)("q-btn-toggle"),f=(0,s.up)("utable"),y=(0,s.up)("linechart"),w=(0,s.up)("q-input"),b=(0,s.up)("q-tree"),k=(0,s.up)("q-scroll-area"),v=(0,s.up)("q-separator"),x=(0,s.up)("q-uploader"),C=(0,s.up)("cgraph"),_=(0,s.up)("q-tooltip"),q=(0,s.up)("q-spinner-puff");return"image"==e.type?((0,s.wg)(),(0,s.j4)(r,{key:0,src:e.data.name,"spinner-color":"blue",onClick:(0,ce.iM)(e.switchValue,["stop"]),fit:"cover",style:(0,l.j5)(e.elemSize)},{default:(0,s.w5)((()=>[e.data.header?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"absolute-bottom-right text-subtitle2 custom-caption",onClick:t[0]||(t[0]=(0,ce.iM)(((...t)=>e.lens&&e.lens(...t)),["stop"]))},(0,l.zw)(e.data.header),1)):(0,s.kq)("",!0),e.value?((0,s.wg)(),(0,s.j4)(d,{key:1,class:"absolute all-pointer-events",size:"32px",name:"check_circle",color:"light-blue-2",style:{"font-size":"2em",top:"8px",left:"8px"}})):(0,s.kq)("",!0)])),_:1},8,["src","onClick","style"])):"select"==e.type?((0,s.wg)(),(0,s.j4)(h,{key:1,"transition-show":"flip-up","transition-hide":"flip-down",dense:"",modelValue:e.value,"onUpdate:modelValue":t[1]||(t[1]=t=>e.value=t),options:e.data.options},(0,s.Nv)({_:2},[e.showname?{name:"prepend",fn:(0,s.w5)((()=>[(0,s.Wm)(c,{color:"secondary"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.name),1)])),_:1})])),key:"0"}:void 0]),1032,["modelValue","options"])):"check"==e.type?((0,s.wg)(),(0,s.j4)(u,{key:2,"left-label":"",modelValue:e.value,"onUpdate:modelValue":t[2]||(t[2]=t=>e.value=t),label:e.nameLabel,"checked-icon":"task_alt","unchecked-icon":"highlight_off"},null,8,["modelValue","label"])):"switch"==e.type?((0,s.wg)(),(0,s.j4)(p,{key:3,modelValue:e.value,"onUpdate:modelValue":t[3]||(t[3]=t=>e.value=t),color:"primary",label:e.nameLabel,"left-label":""},null,8,["modelValue","label"])):"radio"==e.type?((0,s.wg)(),(0,s.iD)("div",ue,[e.showname?((0,s.wg)(),(0,s.j4)(g,{key:0,ripple:!1,color:"indigo-10",disable:"",label:e.name,"no-caps":""},null,8,["label"])):(0,s.kq)("",!0),(0,s.Wm)(m,{modelValue:e.value,"onUpdate:modelValue":t[4]||(t[4]=t=>e.value=t),"no-caps":"",options:e.data.options.map((e=>({label:e,value:e})))},null,8,["modelValue","options"])])):"table"==e.type?((0,s.wg)(),(0,s.j4)(f,{key:5,data:e.data,pdata:e.pdata,styleSize:e.styleSize},null,8,["data","pdata","styleSize"])):"linechart"==e.type?((0,s.wg)(),(0,s.j4)(y,{key:6,data:e.data,pdata:e.pdata,styleSize:e.styleSize},null,8,["data","pdata","styleSize"])):"edit"==e.type?((0,s.wg)(),(0,s.j4)(w,{key:7,modelValue:e.value,"onUpdate:modelValue":t[5]||(t[5]=t=>e.value=t),label:e.name,ref:"inputRef",autogrow:e.data.autogrow,dense:"",onKeyup:(0,ce.D2)(e.pressedEnter,["enter"]),readonly:!1===e.data.edit},null,8,["modelValue","label","autogrow","onKeyup","readonly"])):"number"==e.type?((0,s.wg)(),(0,s.j4)(w,{key:8,modelValue:e.value,"onUpdate:modelValue":t[6]||(t[6]=t=>e.value=t),modelModifiers:{number:!0},label:e.name,ref:"inputRef",dense:"",onKeyup:(0,ce.D2)(e.pressedEnter,["enter"]),type:"number",readonly:!1===e.data.edit},null,8,["modelValue","label","onKeyup","readonly"])):"autoedit"==e.type?((0,s.wg)(),(0,s.j4)(h,{key:9,dense:"",modelValue:e.value,"onUpdate:modelValue":t[7]||(t[7]=t=>e.value=t),"use-input":"","hide-selected":"",borderless:"",outlined:"","hide-bottom-space":"","fill-input":"","input-debounce":"0",options:e.options,onFilter:e.complete,label:e.name,onKeyup:(0,ce.D2)(e.pressedEnter,["enter"])},null,8,["modelValue","options","onFilter","label","onKeyup"])):"tree"==e.type||"list"==e.type?((0,s.wg)(),(0,s.j4)(k,{key:10,style:(0,l.j5)(e.styleSize),"thumb-style":e.thumbStyle,"bar-style":e.barStyle},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{nodes:e.treeNodes,dense:e.data.dense,selected:e.value,"onUpdate:selected":t[8]||(t[8]=t=>e.value=t),expanded:e.expandedKeys,"onUpdate:expanded":t[9]||(t[9]=t=>e.expandedKeys=t),"node-key":"label","default-expand-all":"","selected-color":"blue-10"},null,8,["nodes","dense","selected","expanded"])])),_:1},8,["style","thumb-style","bar-style"])):"docviewer"==e.type?(0,s.wy)(((0,s.wg)(),(0,s.iD)("textarea",{key:11,class:(0,l.C_)(["textarea",{"bg-grey-10":e.Dark.isActive,"text-white":e.Dark.isActive}]),"onUpdate:modelValue":t[10]||(t[10]=t=>e.value=t),filled:"",type:"textarea",style:(0,l.j5)(e.elemSize)},null,6)),[[ce.nr,e.value]]):"line"==e.type?((0,s.wg)(),(0,s.j4)(v,{key:12,color:"green"})):"video"==e.type?((0,s.wg)(),(0,s.iD)("video",{width:e.data.width,height:e.data.height,key:e.data.src,controls:""},[(0,s._)("source",{src:e.data.src,type:"video/mp4"},null,8,ge)],8,pe)):"uploader"==e.type?((0,s.wg)(),(0,s.j4)(x,{key:14,label:e.name,"auto-upload":"",thumbnails:"",url:e.host_path,onUploaded:e.updateDom,onAdded:e.onAdded,style:(0,l.j5)(e.elemSize),ref:"uploaderRef",flat:"",class:(0,l.C_)({"bg-grey-9":e.Dark.isActive})},null,8,["label","url","onUploaded","onAdded","style","class"])):"image_uploader"==e.type?((0,s.wg)(),(0,s.j4)(x,{key:15,label:e.name,"auto-upload":"",thumbnails:"",url:e.host_path,onUploaded:e.updateDom,onAdded:e.onAdded,ref:"uploaderRef",flat:"",class:(0,l.C_)({"bg-grey-10":e.Dark.isActive}),color:e.Dark.isActive?"purple-10":"blue"},null,8,["label","url","onUploaded","onAdded","class","color"])):"graph"==e.type?((0,s.wg)(),(0,s.j4)(C,{key:16,data:e.data,pdata:e.pdata,styleSize:e.elemSize},null,8,["data","pdata","styleSize"])):"camera"==e.type?((0,s.wg)(),(0,s.iD)("div",me,[(0,s._)("div",fe,[(0,s._)("button",{class:(0,l.C_)(["button is-rounded",{"is-primary":!e.isCameraOpen,"is-danger":e.isCameraOpen}]),type:"button",onClick:t[11]||(t[11]=(...t)=>e.toggleCamera&&e.toggleCamera(...t))},[e.isCameraOpen?((0,s.wg)(),(0,s.iD)("span",we,"Close Camera")):((0,s.wg)(),(0,s.iD)("span",ye,"Open Camera"))],2)]),(0,s.wy)((0,s._)("div",be,ve,512),[[ce.F8,e.isCameraOpen&&e.isLoading]]),e.isCameraOpen?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,l.C_)(["camera-box",{flash:e.isShotPhoto}])},[(0,s._)("div",{class:(0,l.C_)(["camera-shutter",{flash:e.isShotPhoto}])},null,2),(0,s.wy)((0,s._)("video",{ref:"camera",width:450,height:337.5,autoplay:""},null,8,xe),[[ce.F8,!e.isPhotoTaken]]),(0,s.wy)((0,s._)("canvas",{id:"photoTaken",ref:"canvas",width:450,height:337.5},null,8,Ce),[[ce.F8,e.isPhotoTaken]])],2)),[[ce.F8,!e.isLoading]]):(0,s.kq)("",!0),e.isCameraOpen&&!e.isLoading?((0,s.wg)(),(0,s.iD)("div",_e,[(0,s._)("button",{class:"button",type:"button",onClick:t[12]||(t[12]=(...t)=>e.takePhoto&&e.takePhoto(...t))},Ae)])):(0,s.kq)("",!0),e.isPhotoTaken&&e.isCameraOpen?((0,s.wg)(),(0,s.iD)("div",De,[(0,s.Wm)(g,{onClick:e.downloadImage,label:"Send"},null,8,["onClick"])])):(0,s.kq)("",!0)])):""!=e.showname?((0,s.wg)(),(0,s.j4)(g,{key:18,"no-caps":"",class:(0,l.C_)({"bg-blue-grey-9":e.Dark.isActive}),label:e.name,icon:e.data.icon,onClick:e.sendValue},{default:(0,s.w5)((()=>[e.data.tooltip?((0,s.wg)(),(0,s.j4)(_,{key:0,class:"text-body2"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.data.tooltip),1)])),_:1})):(0,s.kq)("",!0)])),_:1},8,["class","label","icon","onClick"])):e.data.mode?((0,s.wg)(),(0,s.j4)(g,{key:20,"no-caps":"",dense:"",round:"",class:(0,l.C_)({"bg-grey-9":e.Dark.isActive}),onClick:e.sendValue},{default:(0,s.w5)((()=>[(0,s.Wm)(q,{color:e.data.mode},null,8,["color"]),e.data.tooltip?((0,s.wg)(),(0,s.j4)(_,{key:0,class:"text-body2"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.data.tooltip),1)])),_:1})):(0,s.kq)("",!0)])),_:1},8,["class","onClick"])):((0,s.wg)(),(0,s.j4)(g,{key:19,"no-caps":"",dense:"",round:"",class:(0,l.C_)({"bg-grey-9":e.Dark.isActive}),icon:e.data.icon,onClick:e.sendValue},{default:(0,s.w5)((()=>[e.data.tooltip?((0,s.wg)(),(0,s.j4)(_,{key:0,class:"text-body2"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.data.tooltip),1)])),_:1})):(0,s.kq)("",!0)])),_:1},8,["class","icon","onClick"]))}const je={key:0},ze={class:"row"},Ze=["onClick"];function $e(e,t,a,i,n,o){const d=(0,s.up)("q-icon"),r=(0,s.up)("q-tooltip"),c=(0,s.up)("q-input"),h=(0,s.up)("q-btn"),u=(0,s.up)("q-th"),p=(0,s.up)("q-tr"),g=(0,s.up)("q-checkbox"),m=(0,s.up)("q-select"),f=(0,s.up)("q-td"),y=(0,s.up)("q-table");return(0,s.wg)(),(0,s.j4)(y,{"virtual-scroll":"",dense:e.data.dense,style:(0,l.j5)(e.styleSize),flat:"",filter:e.search,ref:"table",virtualScrollSliceSize:"60","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48,"row-key":"iiid",title:e.name,rows:e.rows,columns:e.columns,selection:e.singleMode?"single":"multiple",selected:e.selected,"onUpdate:selected":t[2]||(t[2]=t=>e.selected=t)},{"top-right":(0,s.w5)((()=>[!1!==e.data.tools?((0,s.wg)(),(0,s.iD)("div",je,[(0,s._)("div",ze,[(0,s.Wm)(c,{modelValue:e.search,"onUpdate:modelValue":t[1]||(t[1]=t=>e.search=t),label:"Search",dense:"",ref:"searchField"},(0,s.Nv)({append:(0,s.w5)((()=>[""!=e.search?((0,s.wg)(),(0,s.j4)(d,{key:0,class:"cursor-pointer",name:"close",size:"xs",onClick:t[0]||(t[0]=t=>{e.search="",e.$refs.searchField.focus()})},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{class:"text-body2"},{default:(0,s.w5)((()=>[(0,s.Uk)("Reset search ")])),_:1})])),_:1})):(0,s.kq)("",!0)])),_:2},[""==e.search?{name:"prepend",fn:(0,s.w5)((()=>[(0,s.Wm)(d,{name:"search",size:"xs"})])),key:"0"}:void 0]),1032,["modelValue"]),(0,s._)("div",null,[(0,s.Wm)(h,{class:(0,l.C_)(["q-ml-xs",{"bg-cyan-10":e.Dark.isActive}]),dense:"",rounded:"",icon:"select_all","no-caps":"",onClick:e.showSelected},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{class:"text-body2"},{default:(0,s.w5)((()=>[(0,s.Uk)("Show selected ")])),_:1})])),_:1},8,["class","onClick"]),(0,s.Wm)(h,{class:(0,l.C_)(["q-ml-xs",{"bg-cyan-10":e.Dark.isActive}]),dense:"",rounded:"",icon:"deselect","no-caps":"",onClick:e.deselectAll},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{class:"text-body2"},{default:(0,s.w5)((()=>[(0,s.Uk)("Deselect all")])),_:1})])),_:1},8,["class","onClick"]),"delete"in e.data?((0,s.wg)(),(0,s.j4)(h,{key:0,class:(0,l.C_)(["q-ml-xs",{"bg-cyan-10":e.Dark.isActive}]),dense:"",rounded:"",icon:"delete_forever","no-caps":"",onClick:e.delSelected},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{class:"text-body2"},{default:(0,s.w5)((()=>[(0,s.Uk)("Delete selected")])),_:1})])),_:1},8,["class","onClick"])):(0,s.kq)("",!0),!1!==e.data.multimode?((0,s.wg)(),(0,s.j4)(h,{key:1,class:(0,l.C_)(["q-ml-xs",{"bg-cyan-10":e.Dark.isActive}]),dense:"",rounded:"",icon:e.singleMode?"looks_one":"grain","no-caps":"",onClick:e.switchMode},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{class:"text-body2"},{default:(0,s.w5)((()=>[(0,s.Uk)("Multi-single select mode")])),_:1})])),_:1},8,["class","icon","onClick"])):(0,s.kq)("",!0),e.editable?((0,s.wg)(),(0,s.j4)(h,{key:2,class:(0,l.C_)(["q-ml-xs",{"bg-cyan-10":e.Dark.isActive}]),dense:"",rounded:"",icon:e.editMode?"cancel":"edit","no-caps":"",onClick:e.switchEdit},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{class:"text-body2"},{default:(0,s.w5)((()=>[(0,s.Uk)("Edit mode")])),_:1})])),_:1},8,["class","icon","onClick"])):(0,s.kq)("",!0),e.editable&&"append"in e.data?((0,s.wg)(),(0,s.j4)(h,{key:3,class:(0,l.C_)(["q-ml-xs",{"bg-cyan-10":e.Dark.isActive}]),dense:"",rounded:"",icon:"add","no-caps":"",onClick:e.append},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{class:"text-body2"},{default:(0,s.w5)((()=>[(0,s.Uk)("Add a new row")])),_:1})])),_:1},8,["class","onClick"])):(0,s.kq)("",!0),"view"in e.data?((0,s.wg)(),(0,s.j4)(h,{key:4,class:(0,l.C_)(["q-ml-xs",{"bg-cyan-10":e.Dark.isActive}]),dense:"",rounded:"",icon:"insights","no-caps":"",onClick:e.chart},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{class:"text-body2"},{default:(0,s.w5)((()=>[(0,s.Uk)("Draw the chart")])),_:1})])),_:1},8,["class","onClick"])):(0,s.kq)("",!0)])])])):(0,s.kq)("",!0)])),header:(0,s.w5)((t=>[(0,s.Wm)(p,{props:t},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.cols,(a=>((0,s.wg)(),(0,s.j4)(u,{class:(0,l.C_)(["text-italic",{"text-grey-9":!e.Dark.isActive,"text-teal-3":e.Dark.isActive}]),key:a.name,props:t},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(a.label),1)])),_:2},1032,["class","props"])))),128))])),_:2},1032,["props"])])),body:(0,s.w5)((t=>[(0,s.Wm)(p,{props:t,onClick:e=>t.selected=!t.selected},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.columns,((a,i)=>((0,s.wg)(),(0,s.j4)(f,{key:a.name,props:t},{default:(0,s.w5)((()=>["boolean"==typeof t.row[a.name]?((0,s.wg)(),(0,s.j4)(g,{key:0,modelValue:t.row[a.name],"onUpdate:modelValue":[e=>t.row[a.name]=e,s=>e.change_switcher(t.row,a.name,i)],dense:"",disable:!e.editMode},null,8,["modelValue","onUpdate:modelValue","disable"])):e.editMode&&"complete"in e.data&&i==e.cedit&&e.redit==t.row.iiid?((0,s.wg)(),(0,s.j4)(m,{key:1,dense:"","model-value":t.row[a.name],"use-input":"","hide-selected":"","fill-input":"",autofocus:"",outlined:"",borderless:"",onInputValue:e.change,"hide-dropdown-icon":"","input-debounce":"0",options:e.options,onFilter:e.complete,onKeydown:e.keyInput},null,8,["model-value","onInputValue","options","onFilter","onKeydown"])):e.editMode&&i==e.cedit&&e.redit==t.row.iiid?((0,s.wg)(),(0,s.j4)(c,{key:2,modelValue:t.row[a.name],"onUpdate:modelValue":[e=>t.row[a.name]=e,e.change],dense:"",onKeydown:e.keyInput,autofocus:""},null,8,["modelValue","onUpdate:modelValue","onKeydown"])):((0,s.wg)(),(0,s.iD)("div",{key:3,onClick:a=>e.select(t.row.iiid,i)},(0,l.zw)(t.row[a.name]),9,Ze))])),_:2},1032,["props"])))),128))])),_:2},1032,["props","onClick"])])),_:1},8,["dense","style","filter","title","rows","columns","selection","selected"])}var Me=a(1959),Ve=a(9058);function Ee(e,t){return e.length===t.length&&e.every(((e,a)=>e.iiid==t[a].iiid))}const We=(0,s.aZ)({name:"utable",setup(e){const{data:t,pdata:a}=(0,Me.BK)(e);let l=(0,s.Fl)((()=>{let e=[],a=t.value;const s=a.headers,l=s.length,i=a.rows,n=i.length;for(var o=0;o<n;o++){const t={},a=i[o];for(var d=0;d<l;d++)t[s[d]]=a[d];t.iiid=o,e.push(t)}return e})),i=()=>{let e=t.value,a=null===e.value||0==l.value.length?[]:Array.isArray(e.value)?e.value.map((e=>l.value[e])):[l.value[e.value]];return a},n=i(),o=(0,Me.iH)(n),d=(0,Me.iH)(n),r=(0,Me.iH)(!Array.isArray(t.value.value)),c=(e,s)=>{D([a.value.name,t.value.name,e,s])},h=(0,s.Fl)((()=>r.value?d.value.length>0?d.value[0].iiid:null:d.value.map((e=>e.iiid)))),u=(0,s.Fl)((()=>t.value.value));return(0,s.YP)(l,((e,t)=>{d.value=i(),o.value=d.value})),(0,s.YP)(t,((e,a)=>{g&&console.log("data update",a.name),d.value=i(),o.value=d.value,r.value=!Array.isArray(t.value.value)})),{rows:l,value:h,selected:d,singleMode:r,sendMessage:c,datavalue:u,updated:o}},data(){return{Dark:Ve.Z,search:"",editMode:!1,options:[],cedit:null}},methods:{select(e,t){this.editMode&&(this.cedit=t,g&&console.log("selected",e,this.cedit))},change_switcher(e,t,a){if(console.log(e,t,a,e[t]),this.editMode){this.cedit=a;const s=e.iiid;let l=this.data.rows;l[s][a]=e[t],this.sendMessage("modify",[e[t],[s,a]])}},change(e){if(g&&console.log("changed",this.data.headers[this.cedit],e),this.editMode&&this.selected.length){const t=this.selected[0].iiid;let a=this.data.rows;a[t][this.cedit]=e,this.sendMessage("modify",[e,[t,this.cedit]])}},keyInput(e){if("Control"==e.key)return;let t=!1;switch(e.key){case"Enter":"update"in this.data&&this.sendMessage("update",[this.rows[this.redit][this.data.headers[this.cedit]],[this.redit,this.cedit]]),t=!0;case"ArrowRight":if(e.ctrlKey||t)for(let e=this.cedit+1;e<this.data.rows[this.redit].length;e++){let t=typeof this.data.rows[this.redit][e];if("string"==t||"number"==t){this.cedit=e;break}}break;case"Escape":this.switchEdit();break;case"ArrowLeft":if(e.ctrlKey)for(let e=this.cedit-1;e>=0;e--){let t=typeof this.data.rows[this.redit][e];if("string"==t||"number"==t){this.cedit=e;break}}break;case"ArrowUp":if(e.ctrlKey&&this.redit>0){let e=this.redit-1,t=this.data,a=typeof t.rows[e][this.cedit];"string"!=a&&"number"!=a||(t.value=e),this.selected=[this.rows[e]]}break;case"ArrowDown":if(e.ctrlKey&&this.redit+1<this.rows.length){let e=this.redit+1,t=this.data,a=typeof t.rows[e][this.cedit];"string"!=a&&"number"!=a||(t.value=e),this.selected=[this.rows[e]]}break}},complete(e,t,a){M(this,[e,[this.redit,this.cedit]],(e=>t((()=>{this.options=e}))))},append(){let e=this.data.rows,t=e.length,a=this;M(this,[t,this.search],(function(s){if(!Array.isArray(s))return h.error(s);g&&console.log("added row",s),a.search="",e.push(s),setTimeout((()=>{let e=a.rows;a.selected=[e[t]],a.showSelected(),a.editMode||a.switchEdit(),a.select(e[t],0)}),100)}),"append")},showSelected(){let e=this.$refs.table;if(this.selected.length){let t=e.computedRows.findIndex((e=>e.iiid===this.selected[0].iiid));e.scrollTo(t)}},deselectAll(){this.selected=[],this.sendMessage("changed",this.value)},chart(){let e=this.data;e.type="linechart"},switchMode(){this.singleMode=!this.singleMode,this.singleMode&&this.selected.length>1&&this.selected.splice(1)},switchEdit(){this.editMode=!this.editMode,this.editMode&&!this.singleMode&&this.switchMode()},delSelected(){if(!this.selected.length)return void h.error("Rows are not selected!");this.sendMessage("delete",this.value);let e=this.data.rows;if(this.singleMode)e.splice(this.selected[0].iiid,1);else{this.selected.length>1&&this.selected.sort(((e,t)=>t.iiid-e.iiid));for(let t of this.selected)e.splice(t.iiid,1)}this.selected=[]}},watch:{selected(e){const t=this.data;if(!Ee(this.updated,this.selected)){let e=this.selected.length;this.sendMessage("changed",this.singleMode?1==e?this.selected[0].iiid:null:this.selected.map((e=>e.iiid))),this.updated=this.selected}t.show&&(this.showSelected(),t.show=!1),this.editMode&&this.selected.length&&(t.value=this.selected[0].iiid)}},computed:{redit(){return this.editMode&&this.selected.length?this.selected[0].iiid:null},editable(){return 0!=this.data["edit"]},name(){return"_"==this.data.name?"":this.data.name},columns(){return this.data.headers.map((e=>({name:e,label:e,align:"left",sortable:!0,field:e})))}},props:{data:Object,pdata:Object,styleSize:String}});var Ke=a(9267),Qe=a(4842),Oe=a(8870),He=a(2165),Ue=a(8186),Ne=a(2414),Fe=a(3884),Te=a(5735),Pe=a(7208);const Re=(0,P.Z)(We,[["render",$e]]),Ie=Re;X()(We,"components",{QTable:Ke.Z,QInput:Qe.Z,QIcon:L.Z,QTooltip:Oe.Z,QBtn:He.Z,QTr:Ue.Z,QTh:Ne.Z,QTd:Fe.Z,QCheckbox:Te.Z,QSelect:Pe.Z});const Le=["nodes","edges"];function Be(e,t,a,i,n,o){return(0,s.wg)(),(0,s.iD)("div",{nodes:e.nodes,edges:e.edges,style:(0,l.j5)(e.styleSize),ref:"cy"},null,12,Le)}var Ye=a(2393),Xe=a.n(Ye);const Ge=Xe().stylesheet().selector("node").css({content:"data(id)","background-color":"#4286f4","font-size":"14px"}).selector(".selected").css({"background-color":"#ff5555","border-color":"#ff5555","font-size":"14px"}).selector("node[label]").css({label:"data(label)","text-valign":"bottom","text-halign":"center","font-size":"14px",color:"#4DB6AC"}).selector("edge").css({label:"data(label)","curve-style":"bezier","target-arrow-shape":"triangle",width:4,"line-color":"#4286f4","target-arrow-color":"#4286f4","font-size":"12px"}).selector(".highlighted").css({"line-color":"pink","target-arrow-color":"#b830f7","font-size":"12px"}).selector("edge[label]").css({label:"data(label)","text-rotation":"autorotate","text-margin-x":"-8px","text-margin-y":"-8px",color:"gray","font-size":"12px"}),Je={animate:!0,randomize:!0};function et(e,t){if(e.length!=t.length)return!0;for(let a=0;a<e.length;a++)if(e[a].id!=t[a].id||e[a].label!=t[a].label)return!0;return!1}const tt=(0,s.aZ)({name:"cgraph",props:{data:Object,pdata:Object,styleSize:String},data(){return{cy:null,style:Ge,layoutOptions:Je,selectedNodes:[],selectedEdges:[],oldNodes:[],oldEdges:[],shiftKey:!1}},beforeUnmount(){window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp)},mounted(){window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp);let e=Xe()({container:this.$refs.cy,elements:{nodes:this.nodes,edges:this.edges},style:this.style}),t=this.value.nodes;this.selectedNodes=t||[];for(let l of this.selectedNodes)e.nodes("[id='"+l+"']").addClass("selected");let a=this.value.edges;this.selectedEdges=a||[];for(let l of this.selectedEdges)e.edges("[id='"+l+"']").addClass("highlighted");this.cy=e;let s=this;e.on("tap","node",(t=>{const a=t.target;if(a.hasClass("selected")){a.removeClass("selected");let e=a.id();s.selectedNodes=s.shiftKey?s.selectedNodes.filter((t=>t!==e)):[]}else!s.shiftKey&&s.selectedEdges.length>0&&(e.$(".selected").removeClass("selected"),s.selectedEdges=[]),a.addClass("selected"),s.selectedNodes.push(a.id());s.sendMessage("changed",{nodes:s.selectedNodes,edges:s.selectedEdges})})),e.on("click",(function(t){let a=t.target;if("id"in a&&(a===e||"edges"==t.target.group())){s.shiftKey||e.edges().removeClass("highlighted");let t=a.id();s.selectedEdges.includes(t)?(s.selectedEdges=s.shiftKey?s.selectedEdges.filter((e=>e!=t)):[],e.edges("[id='"+t+"']").removeClass("highlighted")):(e.edges("[id='"+t+"']").addClass("highlighted"),s.shiftKey?s.selectedEdges.push(t):s.selectedEdges=[t]),s.sendMessage("changed",{nodes:s.selectedNodes,edges:s.selectedEdges})}}))},computed:{nodes(){return this.data.nodes.map((e=>({data:e})))},edges(){return this.data.edges.map((function(e){return e.label=e.label?e.label:"",{data:e}}))},value(){return this.data.value}},methods:{sendMessage(e,t){D([this.pdata["name"],this.data["name"],e,t])},handleKeyDown(e){"Shift"==e.key&&(this.shiftKey=!0)},handleKeyUp(e){"Shift"==e.key&&(this.shiftKey=!1)},showClusterNode(e){const t=e.data("cluster"),a=this.cy.nodes(`[cluster='${t}']`),s=this.cy.nodes(`#${t}`);s.data("isClusterNode",!0),s.animate({position:{x:e.position("x"),y:e.position("y")},width:a.boundingBox().w,height:a.boundingBox().h,duration:300})},hideClusterNode(e){const t=e.data("cluster"),a=this.cy.nodes(`#${t}`);a.animate({position:{x:a.data("origX"),y:a.data("origY")},width:0,height:0,duration:300,complete:()=>{a.data("isClusterNode",!1)}})},hideAllClusterNodes(){const e=this.cy.nodes("[isClusterNode]");e.data("origX",e.position("x")),e.data("origY",e.position("y")),e.animate({position:{x,y:-1e3},width:0,height:0,duration:300,complete:()=>{e.data("isClusterNode",!1)}})}},watch:{selectedNodes(e){if(this.cy){this.cy.$(".selected").removeClass("selected");for(let t of e)this.cy.nodes("[id='"+t+"']").addClass("selected")}},selectedEdges(e,t){let a=this.cy;if(a){t.length&&a.$(".highlighted").removeClass("highlighted");for(let t of e)a.edges("[id='"+t+"']").addClass("highlighted")}},data:{handler(e,t){let a=e.value,s=!1;if(void 0!==a.nodes&&this.selectedNodes!=a.nodes&&(this.selectedNodes=a.nodes),et(e.nodes,this.oldNodes)&&(s=!0,this.oldNodes=e.nodes),void 0!==a.edges&&this.selectedEdges!==a.edges&&(this.selectedEdges=a.edges),et(e.edges,this.oldEdges)&&(s=!0,this.oldEdges=e.edges),s&&null!=this.cy){this.cy.json({elements:{nodes:this.nodes,edges:this.edges}});let e=this.data.method;e||(e="random");let t=this.cy.layout({name:e});t.run()}},deep:!0},style(e){this.cy.style(e)},layoutOptions(e){this.cy.layout(e).run()}}}),at=(0,P.Z)(tt,[["render",Be]]),st=at;function lt(e,t,a,i,n,o){const d=(0,s.up)("v-chart");return(0,s.wg)(),(0,s.j4)(d,{ref:"chart",option:n.options,style:(0,l.j5)(a.styleSize),autoresize:!0},null,8,["option","style"])}var it=a(7559),nt=a(4447),ot=a(1006),dt=a(3526),rt=a(763),ct=a(546),ht=a(6902),ut=a(2826),pt=a(5256),gt=a(3825),mt=a(8825);(0,rt.D)([nt.N,ot.N,dt.N]),(0,rt.D)([ct.N,ht.N,ut.N,pt.N,gt.N]);let ft=["","#80FFA5","#00DDFF","#37A2FF","#FF0087","#FFBF00","rgba(128, 255, 165)","rgba(77, 119, 255)"];const yt={name:"linechart",components:{VChart:it.ZP},props:{data:Object,pdata:Object,styleSize:String},data(){const e=(0,mt.Z)();return{$q:e,model:!1,options:{responsive:!0,maintainAspectRatio:!1,legend:{data:[],bottom:10,textStyle:{color:"#4DD0E1"}},tooltip:{trigger:"axis",position:function(e){return[e[0],"10%"]}},title:{left:"center",text:""},toolbox:{feature:{dataZoom:{yAxisIndex:"none"}}},xAxis:{type:"category",boundaryGap:!1,data:null},yAxis:{type:"value",boundaryGap:[0,"100%"]},dataZoom:[{type:"inside",start:0,end:10},{start:0,end:10}],series:[]}}},methods:{clicked(e){alert("!");var t=[e.offsetX,e.offsetY],a=myChart.convertFromPixel("grid",t),s=myChart.getModel().get("xAxis")[0].data[a[0]];console.log(s)},calcSeries(){this.options.toolbox.feature.mySwitcher={show:!0,title:"Switch view to the table",icon:"image:M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z",onclick:()=>{let e=this.data;e.type="table"}};let e=this.data.view,t=this.data.headers;"_"!=this.data.name[0]&&(this.options.title.text=this.data.name);let a=e.split("-"),s=a[1].split(",");s.unshift(a[0]);let l=[];for(let n=0;n<s.length;n++)s[n]="i"==s[n]?-1:parseInt(s[n]),l.push([]),n&&(this.options.series.push({name:t[s[n]],type:"line",symbol:"none",sampling:"lttb",itemStyle:{color:ft[n]},data:l[n]}),this.options.legend.data.push(t[s[n]]));this.options.xAxis.data=l[0];let i=this.data.rows;for(let n=0;n<i.length;n++)for(let e=0;e<s.length;e++)l[e].push(-1==s[e]?n:i[n][s[e]]);this.$refs.chart.setOption(this.options),this.$refs.chart.chart.on("click",(e=>alert("!")))}},mounted(){this.calcSeries()}},wt=(0,P.Z)(yt,[["render",lt]]),bt=wt;function kt(e){let t=new FormData;t.append("image",e);let a=new XMLHttpRequest;a.open("POST",k,!0),a.onload=function(){200===this.status?console.log(this.response):console.error(a)},a.send(t)}const vt=(0,s.aZ)({name:"element",components:{utable:Ie,cgraph:st,linechart:bt},methods:{log(e){console.log(e)},onAdded(e){0!==e.length&&(0!==this.fileArr.length?(this.$refs.uploaderRef.removeFile(this.fileArr[0]),this.fileArr.splice(0,1,e[0])):this.fileArr.push(e[0]))},sendMessage(e,t){D([this.pdata["name"],this.data["name"],e,t])},pressedEnter(){"update"in this.data&&this.sendMessage("update",this.value)},updateDom(e){let t=e.files.length;t&&this.sendMessage("changed",e.xhr.responseText)},sendValue(){this.sendMessage("changed",this.value)},switchValue(){this.value=!this.value},setValue(e){this.value=e},complete(e,t,a){""!=e&&M(this,e,(e=>t((()=>{this.options=e}))))},lens(){h.lens(this.data)},toggleCamera(){this.isCameraOpen?(this.isCameraOpen=!1,this.isPhotoTaken=!1,this.isShotPhoto=!1,this.stopCameraStream()):(this.isCameraOpen=!0,this.createCameraElement())},createCameraElement(){this.isLoading=!0;const e=window.constraints={audio:!1,video:!0};navigator.mediaDevices.getUserMedia(e).then((e=>{this.isLoading=!1,this.$refs.camera.srcObject=e})).catch((e=>{this.isLoading=!1,alert("May the browser didn't support or there are some errors.")}))},stopCameraStream(){let e=this.$refs.camera.srcObject.getTracks();e.forEach((e=>{e.stop()}))},takePhoto(){if(!this.isPhotoTaken){this.isShotPhoto=!0;const e=50;setTimeout((()=>{this.isShotPhoto=!1}),e)}this.isPhotoTaken=!this.isPhotoTaken;const e=this.$refs.canvas.getContext("2d");e.drawImage(this.$refs.camera,0,0,450,337.5)},downloadImage(){document.getElementById("downloadPhoto"),document.getElementById("photoTaken").toBlob(kt,"image/jpeg")},rect(){let e="clientHeight"in this.$el?this.$el:this.$el.nextElementSibling;return e.getBoundingClientRect()},geom(){let e="clientHeight"in this.$el?this.$el:this.$el.nextElementSibling;e||(e=this.$el.previousElementSibling,e="clientHeight"in e?e:e.nextElementSibling);let t=this.type;const a="docviewer"==t||"graph"==t||"linechart"==t?e:e.querySelector("table"==t?".scroll":".q-tree"),s=e.getBoundingClientRect();return{el:e,inner:a,left:s.left,right:s.right,top:s.top,scrollHeight:a.scrollHeight,scrollWidth:a.scrollWidth}}},updated(){_[this.fullname]=this},mounted(){_[this.fullname]=this,this.data.focus&&this.$refs.inputRef.$el.focus()},data(){return{Dark:Ve.Z,value:this.data.value,styleSize:$(this),host_path:k,options:[],expandedKeys:[],thumbStyle:{right:"4px",borderRadius:"7px",backgroundColor:"#027be3",width:"4px",opacity:.75},barStyle:{right:"2px",borderRadius:"9px",backgroundColor:"#027be3",width:"8px",opacity:.2},updated:"#027be3sds",isCameraOpen:!1,isPhotoTaken:!1,isShotPhoto:!1,isLoading:!1,link:"#",fileArr:[]}},computed:{elemSize(){let e="";return this.data.width&&(e=`width:${this.data.width}px`),this.data.height&&(""!=e&&(e+="; "),e+=`height:${this.data.height}px`),""==e?this.styleSize:e},parent_name(){return this.pdata?this.pdata.name:null},name(){return this.data.name},fullname(){return`${this.data.name}@${this.pdata.name}`},showname(){return"_"!=this.data.name[0]},nameLabel(){return this.data.label?this.data.label:"_"!=this.data.name[0]?this.data.name:""},text(){return this.data.text},expanding(){let e=this.type;return"tree"==e||"table"==e||"list"==e||"docviewer"==e||"graph"==e||"linechart"==e},expanding_width(){return!this.data.width&&this.expanding},expanding_height(){return!this.data.height&&this.expanding},selection(){return this.data.selection},icon(){return this.data.icon},type(){var e=this.data.type;if(e)return e;const t=this.data,a=t.options;return a?a.length>3?"select":"radio":t.headers?"table":(e=typeof this.value,"number"==e||"string"==e?void 0!==t.complete?"autoedit":"edit":"boolean"==e?"switch":"button")},treeNodes(){var e=[];if("list"==this.type)return this.data.options.map((e=>({label:e,children:[]})));var t={};for(const[l,i]of Object.entries(this.data.options)){var a=t[l];if(a||(a={label:l,children:[]},t[l]=a),i){var s=t[i];s||(s={label:i,children:[]},t[i]=s),s.children.push(a)}else e.push(a)}return e}},props:{data:{type:Object,required:!0},pdata:{type:Object,required:!0}},watch:{value(e,t){"tree"==this.type&&this.data.options[e]==t&&this.expandedKeys.indexOf(t)<0&&this.expandedKeys.push(t),e!==this.updated&&(this.sendValue(),this.updated=e)},selection(e){Array.isArray(e)||(e=[0,0]);let t=this.$refs.inputRef.$el;t.focus();let a=t.getElementsByTagName("textarea");0==a.length&&(a=t.getElementsByTagName("input")),a[0].setSelectionRange(e[0],e[1])},data(e,t){this.styleSize||(this.styleSize=finitStyle(this.data)),this.value=this.data.value,this.updated=this.value,_[this.fullname]=this}}});var xt=a(4027),Ct=a(9721),_t=a(8886),qt=a(8761),At=a(1232),Dt=a(5551),St=a(5869),jt=a(1745),zt=a(8430);const Zt=(0,P.Z)(vt,[["render",Se],["__scopeId","data-v-591efd84"]]),$t=Zt;X()(vt,"components",{QImg:xt.Z,QIcon:L.Z,QSelect:Pe.Z,QBadge:Ct.Z,QCheckbox:Te.Z,QToggle:_t.Z,QBtn:He.Z,QBtnToggle:qt.Z,QInput:Qe.Z,QScrollArea:At.Z,QTree:Dt.Z,QSeparator:St.Z,QUploader:jt.Z,QTooltip:Oe.Z,QSpinnerPuff:zt.Z});const Mt=(0,s.aZ)({name:"block",components:{element:$t},data(){return{Dark:Ve.Z,styleSize:y,thumbStyle:{right:"4px",borderRadius:"7px",backgroundColor:"#027be3",width:"4px",opacity:.75},barStyle:{right:"2px",borderRadius:"9px",backgroundColor:"#027be3",width:"8px",opacity:.2}}},methods:{log(){console.log(Object.keys(C).length,this.name,this.$el.getBoundingClientRect())},geom(){let e="clientHeight"in this.$el?this.$el:this.$el.nextElementSibling;const t=e.querySelector(".q-scrollarea"),a=e.getBoundingClientRect();return{el:e,inner:t,left:a.left,right:a.right,top:a.top,scrollHeight:window.innerHeight,scrollWidth:window.innerWidth}}},mounted(){C[this.name]=this,this.expanding&&(_[this.fullname]=this)},computed:{name(){return this.data.name},fullname(){return`_scroll@${this.name}`},icon(){return this.data.icon},expanding(){return this.data.scroll},expanding_width(){return this.expanding},expanding_height(){return!this.data.height&&this.expanding},tops(){let e=this.data.value;return e.length?Array.isArray(e[0])?e[0]:[e[0]]:[]}},props:{data:{type:Object,required:!0}},watch:{data(e){g&&console.log("data update",this.name),C[this.name]=this,this.expanding&&(this.styleSize=$(this),_[this.fullname]=this)}}});var Vt=a(151);const Et=(0,P.Z)(Mt,[["render",re]]),Wt=Et;function Kt(){let e=z&&_.size==q.size;if(e)for(let[t,a]of Object.entries(_))if(!q[t]){e=!1;break}e||(U(),(0,s.Y3)((()=>{requestAnimationFrame((()=>{requestAnimationFrame((()=>{h.visible(!0)}))}))})))}X()(Mt,"components",{QCard:Vt.Z,QIcon:L.Z,QScrollArea:At.Z});const Qt=(0,s.aZ)({name:"zone",components:{block:Wt},props:{data:Object},updated(e){(0,s.Y3)((()=>{requestAnimationFrame((()=>{requestAnimationFrame(Kt)}))}))}}),Ot=(0,P.Z)(Qt,[["render",se]]),Ht=Ot,Ut={class:"row q-gutter-sm row-md"};function Nt(e,t,a,i,n,o){const d=(0,s.up)("block"),r=(0,s.up)("q-item-label"),c=(0,s.up)("q-space"),h=(0,s.up)("q-btn"),u=(0,s.up)("q-card"),p=(0,s.up)("q-dialog");return(0,s.wg)(),(0,s.j4)(p,{ref:"dialog",onHide:o.onDialogHide,onKeyup:(0,ce.D2)(o.pressedEnter,["enter"])},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{class:"q-dialog-plugin q-pa-md items-start q-gutter-md",bordered:"",style:(0,l.j5)(a.data.internal?"width: 800px; max-width: 80vw;":"")},{default:(0,s.w5)((()=>[a.data?((0,s.wg)(),(0,s.j4)(d,{key:0,data:a.data},null,8,["data"])):(0,s.kq)("",!0),(0,s.Wm)(r,{class:"text-h6"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(a.data.text?a.data.text:""),1)])),_:1}),(0,s._)("div",Ut,[(0,s.Wm)(c),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.buttons,(e=>((0,s.wg)(),(0,s.j4)(h,{class:"col-md-3",label:e,color:a.buttons[0]==e?"primary":"secondary",onClick:t=>o.sendMessage(e)},null,8,["label","color","onClick"])))),256))])])),_:1},8,["style"])])),_:1},8,["onHide","onKeyup"])}const Ft={props:{data:Object,buttons:Array},components:{block:Wt},emits:["ok","hide"],methods:{show(){this.$refs.dialog.show()},sendMessage(e){this.data.internal||D([this.data["name"],e]),this.hide()},hide(){this.$refs.dialog.hide()},onDialogHide(){this.$emit("hide")},pressedEnter(){this.sendMessage(this.buttons[0])},onOKClick(){this.$emit("ok"),this.hide()},onCancelClick(){this.hide()}}};var Tt=a(5926),Pt=a(2025);const Rt=(0,P.Z)(Ft,[["render",Nt]]),It=Rt;X()(Ft,"components",{QDialog:Tt.Z,QCard:Vt.Z,QItemLabel:B.Z,QSpace:Pt.Z,QBtn:He.Z});let Lt=null;const Bt=(0,s.aZ)({name:"MainLayout",data(){return{leftDrawerOpen:!1,Dark:Ve.Z,menu:[],tab:"",tooldata:{name:"toolbar"},localServer:!0,statusConnect:!1,screen:{blocks:[]},visibility:!1}},components:{menubar:J,zone:Ht,element:$t},created(){A(this)},unmounted(){window.removeEventListener("resize",this.onResize)},methods:{toggleLeftDrawer(){this.leftDrawerOpen=!this.leftDrawerOpen},tabclick(e){D(["root",e])},visible(e){this.$refs.page.$el.style.visibility=e?"":"hidden",this.visibility=e},onResize(e){g&&console.log("window has been resized",window.innerHeight,window.innerWidth),H()},lens(e){let t={title:"Photo lens",message:e.text,cancel:!0,persistent:!0,component:It},{height:a,...s}=e;s.width=750;let l={name:`Picture lens of ${e.name}`,value:[[],s],internal:!0};t.componentProps={data:l,buttons:["Close"]},this.$q.dialog(t)},notify(e,t){let a=t,s={message:e,type:t,position:"top",icon:a};"progress"==t?null==Lt?(s={group:!1,timeout:0,spinner:!0,type:"info",message:e||"Progress..",position:"top",color:"secondary"},Lt=this.$q.notify(s)):null==e?(Lt(),Lt=null):(s={caption:e},Lt(s)):("error"==t&&s.type,this.$q.notify(s))},error(e){this.notify(e,"error")},info(e){this.notify(e,"info")},processMessage(e){if("screen"==e.type)V(),this.screen.name!=e.name&&(Z(!1),this.visible(!1)),this.screen=e,this.menu=e.menu.map((e=>({name:e[0],icon:e[1],order:e[2]}))),this.tab=this.screen.name;else if("dialog"==e.type){let t={title:e.name,message:e.text,cancel:!0,persistent:!0};t.component=It,t.componentProps={data:e.content?e.content:e,buttons:e.buttons},this.$q.dialog(t)}else if("answer"==e.type)K(e);else{e.updates&&W(e.updates);let t=!1;["error","progress","warning","info"].includes(e.type)&&(this.notify(e.value,e.type),t=!0),t||e.updates||(this.error("Invalid data came from the server! Look the console."),console.log(`Invalid data came from the server! ${e}`))}Lt&&"progress"!=e.type&&this.notify(null,"progress")}},mounted(){window.addEventListener("resize",this.onResize)}});var Yt=a(9214),Xt=a(3812),Gt=a(9570),Jt=a(7547),ea=a(3269),ta=a(2652),aa=a(4379);const sa=(0,P.Z)(Bt,[["render",o]]),la=sa;X()(Bt,"components",{QLayout:Yt.Z,QHeader:Xt.Z,QToolbar:Gt.Z,QBtn:He.Z,QItemLabel:B.Z,QTabs:Jt.Z,QTab:ea.Z,QSpace:Pt.Z,QTooltip:Oe.Z,QPageContainer:ta.Z,QPage:aa.Z})}}]);